<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>面试问题 - Storage</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../mysql/index.html"><strong aria-hidden="true">1.</strong> Mysql</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mysql/arch.html"><strong aria-hidden="true">1.1.</strong> 架构</a></li><li class="chapter-item expanded "><a href="../mysql/data_type.html"><strong aria-hidden="true">1.2.</strong> 数据类型</a></li><li class="chapter-item expanded "><a href="../mysql/encode.html"><strong aria-hidden="true">1.3.</strong> 编码</a></li><li class="chapter-item expanded "><a href="../mysql/sql.html"><strong aria-hidden="true">1.4.</strong> SQL语法</a></li><li class="chapter-item expanded "><a href="../mysql/engine.html"><strong aria-hidden="true">1.5.</strong> 存储引擎</a></li><li class="chapter-item expanded "><a href="../mysql/sync.html"><strong aria-hidden="true">1.6.</strong> 主从同步</a></li><li class="chapter-item expanded "><a href="../mysql/mysqldump.html"><strong aria-hidden="true">1.7.</strong> mysqldump</a></li><li class="chapter-item expanded "><a href="../mysql/interview.html" class="active"><strong aria-hidden="true">1.8.</strong> 面试问题</a></li></ol></li><li class="chapter-item expanded "><a href="../redis/index.html"><strong aria-hidden="true">2.</strong> Redis</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../redis/data_structure.html"><strong aria-hidden="true">2.1.</strong> 数据结构</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Storage</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="面试问题"><a class="header" href="#面试问题">面试问题</a></h1>
<h3 id="待处理问题"><a class="header" href="#待处理问题">待处理问题</a></h3>
<ul>
<li>唯一索引和普通索引的区别，索引类别（B+树索引、全文索引、哈希索引），索引的区别</li>
<li>为什么要用 B+tree 作为 MySql 索引的数据结构</li>
<li>聚集索引与非聚集索引的区别</li>
<li>DDL、DML、DCL 分别指什么</li>
<li>explain 命令</li>
<li>数据库的几大范式</li>
<li>说说分库与分表设计，分库与分表带来的分布式困境与对应之策</li>
<li>什么是自适应哈希索引（AHI）</li>
<li>limit 20000 加载很慢怎么解决</li>
<li>常见的几种分布式 ID 的设计方案
基础部分
<ul>
<li>
<ol>
<li>事务四大特性（ACID）</li>
</ol>
</li>
<li>
<ol start="2">
<li>数据库隔离级别，每个级别会引发什么问题，mysql默认是哪个级别</li>
</ol>
</li>
<li>
<ol start="3">
<li>MYSQL的两种存储引擎区别（事务、锁级别等等），各自的适用场景</li>
</ol>
</li>
<li>
<ol start="4">
<li>数据库的优化（从sql语句优化和索引两个部分回答）</li>
</ol>
</li>
<li>
<ol start="5">
<li>索引有B+索引和hash索引，各自的区别</li>
</ol>
</li>
<li>
<ol start="6">
<li>B+索引数据结构，和B树的区别</li>
</ol>
</li>
<li>
<ol start="7">
<li>索引的分类（主键索引、唯一索引），最左前缀原则，哪些情况索引会失效</li>
</ol>
</li>
<li>
<ol start="8">
<li>聚集索引和非聚集索引区别。</li>
</ol>
</li>
<li>
<ol start="9">
<li>有哪些锁（乐观锁悲观锁），select时怎么加排它锁</li>
</ol>
</li>
<li>
<ol start="10">
<li>关系型数据库和非关系型数据库区别</li>
</ol>
</li>
<li>
<ol start="11">
<li>了解nosql</li>
</ol>
</li>
<li>
<ol start="12">
<li>数据库三范式，根据某个场景设计数据表（可以通过手绘ER图）</li>
</ol>
</li>
<li>
<ol start="13">
<li>数据库的主从复制</li>
</ol>
</li>
<li>
<ol start="14">
<li>使用explain优化sql和索引</li>
</ol>
</li>
<li>
<ol start="15">
<li>long_query怎么解决</li>
</ol>
</li>
<li>
<ol start="16">
<li>内连接、外连接、交叉连接、笛卡儿积等
深入</li>
</ol>
</li>
<li>
<ol>
<li>MVCC机制</li>
</ol>
</li>
<li>
<ol start="2">
<li>根据具体场景，说明版本控制机制</li>
</ol>
</li>
<li>
<ol start="3">
<li>死锁怎么解决</li>
</ol>
</li>
<li>
<ol start="4">
<li>varchar和char的使用场景。</li>
</ol>
</li>
<li>
<ol start="5">
<li>mysql并发情况下怎么解决（通过事务、隔离级别、锁）</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="数据库中的事务是什么"><a class="header" href="#数据库中的事务是什么">数据库中的事务是什么?</a></h3>
<ul>
<li>事务（transaction）是作为一个单元的一组有序的数据库操作。如果组中的所有操作都成功，则认为事务成功，即使只有一个操作失败，事务也不成功。如果所有操作完成，事务则提交，其修改将作用于所有其他数据库进程。如果一个操作失败，则事务将回滚，该事务所有操作的影响都将取消。</li>
</ul>
<h3 id="优化mysql数据库的方法"><a class="header" href="#优化mysql数据库的方法">优化MYSQL数据库的方法?</a></h3>
<ul>
<li>选取最适用的字段属性,尽可能减少定义字段长度,尽量把字段设置NOT NULL,例如'省份,性别',最好设置为ENUM</li>
<li>使用连接（JOIN）来代替子查询</li>
<li>使用联合(UNION)来代替手动创建的临时表</li>
<li>建立索引</li>
</ul>
<p>varchar快速很多，但是浪费存储空间，所以对存储不大，但在速度上有要求的可以使用char类型，反之可以用varchar类型来实例。</p>
<h3 id="优化数据库的方法说说-sql-优化之道"><a class="header" href="#优化数据库的方法说说-sql-优化之道">优化数据库的方法。说说 SQL 优化之道</a></h3>
<ul>
<li>主机性能</li>
<li>内存使用性能</li>
<li>网络传输性能</li>
<li>SQL语句执行性能</li>
</ul>
<h3 id="acid规则"><a class="header" href="#acid规则">ACID规则</a></h3>
<p>事务在英文中是transaction，和现实世界中的交易很类似，它有如下四个特性：</p>
<ul>
<li>1、A (Atomicity) 原子性
<ul>
<li>原子性很容易理解，也就是说事务里的所有操作要么全部做完，要么都不做，事务成功的条件是事务里的所有操作都成功，只要有一个操作失败，整个事务就失败，需要回滚。</li>
<li>比如银行转账，从A账户转100元至B账户，分为两个步骤：1）从A账户取100元；2）存入100元至B账户。这两步要么一起完成，要么一起不完成，如果只完成第一步，第二步失败，钱会莫名其妙少了100元。</li>
</ul>
</li>
<li>2、C (Consistency) 一致性
<ul>
<li>一致性也比较容易理解，也就是说数据库要一直处于一致的状态，事务的运行不会改变数据库原本的一致性约束。
例如现有完整性约束a+b=10，如果一个事务改变了a，那么必须得改变b，使得事务结束后依然满足a+b=10，否则事务失败。</li>
</ul>
</li>
<li>3、I (Isolation) 独立性
<ul>
<li>所谓的独立性是指并发的事务之间不会互相影响，如果一个事务要访问的数据正在被另外一个事务修改，只要另外一个事务未提交，它所访问的数据就不受未提交事务的影响。</li>
<li>比如现在有个交易是从A账户转100元至B账户，在这个交易还未完成的情况下，如果此时B查询自己的账户，是看不到新增加的100元的。</li>
</ul>
</li>
<li>4、D (Durability) 持久性
<ul>
<li>持久性是指一旦事务提交后，它所做的修改将会永久的保存在数据库上，即使出现宕机也不会丢失。</li>
</ul>
</li>
</ul>
<h3 id="mysql存储引擎有哪些有什么区别"><a class="header" href="#mysql存储引擎有哪些有什么区别">Mysql存储引擎有哪些？有什么区别？</a></h3>
<ul>
<li>innodb、myisam</li>
<li>MyISAM：成熟、稳定、易于管理，快速读取。一些功能不支持（事务等），表级锁。</li>
<li>InnoDB：支持事务、外键等特性、数据行锁定。空间占用大，不支持全文索引等。</li>
</ul>
<h3 id="varchar和char有什么区别"><a class="header" href="#varchar和char有什么区别">varchar和char有什么区别</a></h3>
<ul>
<li>char 长度是固定的，不管你存储的数据是多少他都会都固定的长度。而varchar则处可变长度但他要在总长度上加1字符，这个用来存储位置。</li>
<li>char 固定长度，所以在处理速度上要比</li>
</ul>
<h3 id="1数据库中的事务是什么事务的隔离级别脏读幻读不可重复读是什么意思"><a class="header" href="#1数据库中的事务是什么事务的隔离级别脏读幻读不可重复读是什么意思">1.数据库中的事务是什么?事务的隔离级别?脏读、幻读、不可重复读是什么意思？</a></h3>
<ul>
<li>数据库事务
<ul>
<li>将一组相关操作组合为一个要么全部成功要么全部失败的单元</li>
<li>具有ACID（原子性、一致性、隔离性和持久性）属性
<ul>
<li>原子性(Atomicity)：原子性是指事务包含的所有操作要么全部成功，要么全部失败回滚</li>
<li>一致性(Consistent)：一致性是指事务必须使数据库从一个一致性状态变换到另一个一致性状态，也就是说一个事务执行之前和执行之后都必须于一致性状态</li>
<li>隔离性(Isolation)：隔离性是当多个用户并发访问数据库时，比如操作同一张表时，数据库为每一个用户开启的事务，不能被其他事务的操作所扰，多个并发事务之间要相互隔离。</li>
<li>持久性(Duration)：持久性是指一个事务一旦被提交了，那么对数据库中的数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作。</li>
</ul>
</li>
</ul>
</li>
<li>事物隔离级别
<ul>
<li>Serializable (串行化)：可避免脏读、不可重复读、幻读的发生。</li>
<li>Repeatable read (可重复读)：可避免脏读、不可重复读的发生。</li>
<li>Read committed (读已提交)：可避免脏读的发生。</li>
<li>Read uncommitted (读未提交)：最低级别，任何情况都无法保证。</li>
</ul>
</li>
<li>脏读、幻读、不可重复读
<ul>
<li>脏读：脏读是指在一个事务处理过程里读取了另一个未提交的事务中的数据</li>
<li>不可重复读：不可重复读是指在对于数据库中的某个数据，一个事务范围内多次查询却返回了不同的数据值，这是由于在查询间隔，被另一个事务修改并提交了。</li>
<li>幻读：是事务非独立执行时发生的一种现象。例如事务T1对一个表中所有的行的某个数据项做了从“1”修改为“2”的操作，这时事务T2又对这个表中插入了一行数据项，而这个数据项的数值还是为“1”并且提交给数据库。而操作事务T1的用户如果再查看刚刚修改的数据，会发现还有一行没有修改，其实这行是从事务T2中添加的，就好像产生幻觉一样，这就是发生了幻读。</li>
</ul>
</li>
<li>备注：
<ul>
<li>不可重复读和脏读的区别是，脏读是某一事务读取了另一个事务未提交的脏数据，而不可重复读则是读取了前一事务提交的数据。</li>
<li>幻读和不可重复读都是读取了另一条已经提交的事务（这点就脏读不同），所不同的是不可重复读查询的都是同一个数据项，而幻读针对的是一批数据整体（比如数据的个数）</li>
<li>当前事务的隔离级别：select @@tx_isolation;</li>
</ul>
</li>
</ul>
<h3 id="2优化数据库的方法说说-sql-优化之道"><a class="header" href="#2优化数据库的方法说说-sql-优化之道">2.优化数据库的方法。说说 SQL 优化之道</a></h3>
<ul>
<li>主机性能</li>
<li>内存使用性能</li>
<li>网络传输性能</li>
<li>SQL语句执行性能</li>
</ul>
<h3 id="3唯一索引和普通索引的区别索引类别b树索引全文索引哈希索引索引的区别"><a class="header" href="#3唯一索引和普通索引的区别索引类别b树索引全文索引哈希索引索引的区别">3.唯一索引和普通索引的区别，索引类别（B+树索引、全文索引、哈希索引），索引的区别</a></h3>
<h3 id="为什么要用-btree-作为-mysql-索引的数据结构"><a class="header" href="#为什么要用-btree-作为-mysql-索引的数据结构">为什么要用 B+tree 作为 MySql 索引的数据结构</a></h3>
<h3 id="聚集索引与非聚集索引的区别"><a class="header" href="#聚集索引与非聚集索引的区别">聚集索引与非聚集索引的区别</a></h3>
<h3 id="mysql存储引擎有哪些有什么区别存储引擎的-innodb-与-myisam区别优缺点使用场景"><a class="header" href="#mysql存储引擎有哪些有什么区别存储引擎的-innodb-与-myisam区别优缺点使用场景">Mysql存储引擎有哪些？有什么区别？存储引擎的 InnoDB 与 MyISAM区别、优缺点、使用场景？</a></h3>
<h3 id="varchar和char有什么区别-1"><a class="header" href="#varchar和char有什么区别-1">varchar和char有什么区别</a></h3>
<h3 id="ddldmldcl-分别指什么"><a class="header" href="#ddldmldcl-分别指什么">DDL、DML、DCL 分别指什么</a></h3>
<h3 id="explain-命令"><a class="header" href="#explain-命令">explain 命令</a></h3>
<h3 id="数据库的几大范式"><a class="header" href="#数据库的几大范式">数据库的几大范式</a></h3>
<h3 id="说说分库与分表设计分库与分表带来的分布式困境与对应之策"><a class="header" href="#说说分库与分表设计分库与分表带来的分布式困境与对应之策">说说分库与分表设计，分库与分表带来的分布式困境与对应之策</a></h3>
<h3 id="什么是自适应哈希索引ahi"><a class="header" href="#什么是自适应哈希索引ahi">什么是自适应哈希索引（AHI）</a></h3>
<h3 id="limit-20000-加载很慢怎么解决"><a class="header" href="#limit-20000-加载很慢怎么解决">limit 20000 加载很慢怎么解决</a></h3>
<h3 id="常见的几种分布式-id-的设计方案"><a class="header" href="#常见的几种分布式-id-的设计方案">常见的几种分布式 ID 的设计方案</a></h3>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../mysql/mysqldump.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../redis/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../mysql/mysqldump.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../redis/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:23827/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
