# 数据库基础
- 作者：codehackfox@gmail.com
- 时间：2019-03-10 18:19:34

>### 1.数据库中的事务是什么?事务的隔离级别?脏读、幻读、不可重复读是什么意思？

- 数据库事务
    * 将一组相关操作组合为一个要么全部成功要么全部失败的单元
    * 具有ACID（原子性、一致性、隔离性和持久性）属性
        * 原子性(Atomicity)：原子性是指事务包含的所有操作要么全部成功，要么全部失败回滚
        * 一致性(Consistent)：一致性是指事务必须使数据库从一个一致性状态变换到另一个一致性状态，也就是说一个事务执行之前和执行之后都必须于一致性状态
        * 隔离性(Isolation)：隔离性是当多个用户并发访问数据库时，比如操作同一张表时，数据库为每一个用户开启的事务，不能被其他事务的操作所扰，多个并发事务之间要相互隔离。
        * 持久性(Duration)：持久性是指一个事务一旦被提交了，那么对数据库中的数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作。
- 事物隔离级别
    * Serializable (串行化)：可避免脏读、不可重复读、幻读的发生。
    * Repeatable read (可重复读)：可避免脏读、不可重复读的发生。
    * Read committed (读已提交)：可避免脏读的发生。
    * Read uncommitted (读未提交)：最低级别，任何情况都无法保证。
- 脏读、幻读、不可重复读
    * 脏读：脏读是指在一个事务处理过程里读取了另一个未提交的事务中的数据
    * 不可重复读：不可重复读是指在对于数据库中的某个数据，一个事务范围内多次查询却返回了不同的数据值，这是由于在查询间隔，被另一个事务修改并提交了。
    * 幻读：是事务非独立执行时发生的一种现象。例如事务T1对一个表中所有的行的某个数据项做了从“1”修改为“2”的操作，这时事务T2又对这个表中插入了一行数据项，而这个数据项的数值还是为“1”并且提交给数据库。而操作事务T1的用户如果再查看刚刚修改的数据，会发现还有一行没有修改，其实这行是从事务T2中添加的，就好像产生幻觉一样，这就是发生了幻读。
- 备注：
    * 不可重复读和脏读的区别是，脏读是某一事务读取了另一个事务未提交的脏数据，而不可重复读则是读取了前一事务提交的数据。
    * 幻读和不可重复读都是读取了另一条已经提交的事务（这点就脏读不同），所不同的是不可重复读查询的都是同一个数据项，而幻读针对的是一批数据整体（比如数据的个数）
    * 当前事务的隔离级别：select @@tx_isolation;

---
>### 2.优化数据库的方法。说说 SQL 优化之道

- 主机性能
- 内存使用性能
- 网络传输性能
- SQL语句执行性能

---
>### 3.唯一索引和普通索引的区别，索引类别（B+树索引、全文索引、哈希索引），索引的区别



---
>### 为什么要用 B+tree 作为 MySql 索引的数据结构



---
>### 聚集索引与非聚集索引的区别

---
>### Mysql存储引擎有哪些？有什么区别？存储引擎的 InnoDB 与 MyISAM区别、优缺点、使用场景？

---
>### varchar和char有什么区别

---
>### DDL、DML、DCL 分别指什么

---
>### explain 命令

---
>### 数据库的几大范式

---
>### 说说分库与分表设计，分库与分表带来的分布式困境与对应之策

---
>### 什么是自适应哈希索引（AHI）

---
>### limit 20000 加载很慢怎么解决

---
>### 常见的几种分布式 ID 的设计方案